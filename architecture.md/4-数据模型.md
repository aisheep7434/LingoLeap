# 4. 数据模型

## Profile

  * **目的**: 存储与用户相关的公开信息，并补充 Supabase Auth 提供的认证数据。
  * **TypeScript Interface**:
    ```typescript
    export interface Profile {
      id: string; // Corresponds to Supabase user ID
      updated_at: string;
      username: string | null;
      full_name: string | null;
      avatar_url: string | null;
      learning_streak: number;
    }
    ```
  * **关系**: 与 `auth.users` 表一对一关联 (via `id`)。

## Deck (单词卡片集)

  * **目的**: 表示一个可供学习的单词集合。
  * **TypeScript Interface**:
    ```typescript
    export interface Deck {
      id: number;
      created_at: string;
      title: string;
      description: string | null;
      language: string;
    }
    ```
  * **关系**: 一个 Deck 包含多个 `Word` (一对多)。

## Word (单词)

  * **目的**: 表示卡片集中的一个具体单词或短语。
  * **TypeScript Interface**:
    ```typescript
    export interface Word {
      id: number;
      created_at: string;
      deck_id: number; // Foreign key to Deck
      original_word: string;
      translation: string;
      example_sentence: string | null;
    }
    ```
  * **关系**: 多个 Word 属于一个 `Deck` (多对一)。

## QuizResult (测试结果)

  * **目的**: 记录用户完成一次特定卡片集测试的历史成绩。
  * **TypeScript Interface**:
    ```typescript
    export interface QuizResult {
      id: number;
      created_at: string;
      user_id: string; // Foreign key to Profile/User
      deck_id: number; // Foreign key to Deck
      score: number; // e.g., 85 for 85%
    }
    ```
  * **关系**: 多个 `QuizResult` 属于一个 `Profile` 和一个 `Deck` (多对一)。

## UserWordMastery (用户单词掌握度)

  * **目的**: 追踪单个用户对单个单词的掌握程度。
  * **TypeScript Interface**:
    ```typescript
    export interface UserWordMastery {
      id: number;
      user_id: string; // Foreign key to Profile/User
      word_id: number; // Foreign key to Word
      mastery_level: number; // e.g., 0-5 scale
      last_reviewed_at: string;
    }
    ```
  * **关系**: 连接 `Profile` 和 `Word` 的多对多关系的联结表。
